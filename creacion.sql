--ALVARO VAZQUEZ GONZALEZ
SET SERVEROUTPUT ON;

--------------------------------------------------------------------------------
--SE ELIMINAN LAS TABLAS PARA QUE NO HAYA COINCIDENCIAS
DROP TABLE PELICULA CASCADE CONSTRAINTS;
DROP TABLE ACTOR CASCADE CONSTRAINTS;
DROP TABLE ACTUAN CASCADE CONSTRAINTS;
DROP TABLE DIRECTOR CASCADE CONSTRAINTS;
DROP TABLE GUIONISTA CASCADE CONSTRAINTS;
DROP TABLE ESTUDIO CASCADE CONSTRAINTS;


--------------------------------------------------------------------------------
--SE CREAN LAS TABLAS QUE VAMOS A USAR EN LA BASE DE DATOS

--ALMACENA LOS DATOS DE LOS DIRECTORES
CREATE TABLE DIRECTOR(
    DIR_DNI NUMBER(8) PRIMARY KEY,
    DIR_NOMBRE VARCHAR(40),
    DIR_APELLIDOS VARCHAR(40),
    DIR_TELEFONO NUMBER(9),
    DIR_DIRECCION VARCHAR(40),
    DIR_SALARIO NUMBER(7)

);

--ALMACENA LOS DATOS DE LOS GUINISTAS
CREATE TABLE GUIONISTA(
    GUI_DNI NUMBER(8) PRIMARY KEY,
    GUI_NOMBRE VARCHAR(40),
    GUI_APELLIDOS VARCHAR(40),
    GUI_TELEFONO NUMBER(9),
    GUI_DIRECCION VARCHAR(40),
    GUI_SALARIO NUMBER(7)

);

--ALMACENA LOS DATOS RELEVANTE A CADA ESTUDIO CINEMATOGRÁFICO
CREATE TABLE ESTUDIO(
    EST_ID NUMBER(8) PRIMARY KEY,
    EST_NOMBRE VARCHAR(40),
    EST_FUNDACION DATE,
    EST_PRESUPUESTO NUMBER(11),
    EST_LOCALIDAD VARCHAR(40)

);

--ALMACENA LOS DATOS DE CADA PELICULA 
CREATE TABLE PELICULA(
    PELI_ID NUMBER(8) PRIMARY KEY,
    PELI_TITULO VARCHAR(40),
    PELI_DIRECTOR NUMBER(8) REFERENCES DIRECTOR(DIR_DNI),
    PELI_ESTUDIO NUMBER(8) REFERENCES ESTUDIO(EST_ID),
    PELI_GUIONISTA NUMBER(8) REFERENCES GUIONISTA(GUI_DNI),
    PELI_ANO DATE
    
);

--ALMACENA LOS DATOS DE LOS ACTORES
CREATE TABLE ACTOR(
    ACT_DNI NUMBER(8) PRIMARY KEY,
    ACT_NOMBRE VARCHAR(40),
    ACT_APELLIDOS VARCHAR(40),
    ACT_TELEFONO NUMBER(9),
    ACT_DIRECCION VARCHAR(40),
    ACT_SALARIO NUMBER(11)

);

--ALMACENA QUE ACTORES TRABAJAN EN CADA PELICULA Y CUALES DE ESTOS SON LOS PRINCIPALES
CREATE TABLE ACTUAN(
    ACTUA_PELI NUMBER(8) REFERENCES PELICULA(PELI_ID),
    ACTUA_DNI NUMBER(8) REFERENCES ACTOR(ACT_DNI),
    ACTUA_PRINCIPAL NUMBER(8) REFERENCES ACTOR(ACT_DNI) UNIQUE,
    
    PRIMARY KEY (ACTUA_PELI, ACTUA_DNI)
);


--------------------------------------------------------------------------------
--SE INSERTAN LOS DATOS EN CADA TABLA
INSERT INTO ESTUDIO VALUES (11111, 'Columbia Pictures', '10-ENE-1924', 980000000, 'Madrid');
INSERT INTO ESTUDIO VALUES (22222, 'Sony Pictures', '21-DIC-1987', 875000000, 'Barcelona');
INSERT INTO ESTUDIO VALUES (33333, 'Paramount Pictures', '08-MAY-1912', 3450000000, 'Granada');

INSERT INTO DIRECTOR VALUES (28658415, 'Juan Manuel', 'Perez Roperto', 646000111, 'Av. Los palacios, nº1', 54000);
INSERT INTO DIRECTOR VALUES (34562781, 'Ana', 'Lobato Tiras', 633222333, 'C. Macias, nº2', 50900);
INSERT INTO DIRECTOR VALUES (18654249, 'Felipe', 'Torres Almudena', 646444555, 'Av. Macetas, nº3', 45000);


INSERT INTO GUIONISTA VALUES (51687321, 'Luis Manuel', 'Candela Mañugo', 633666777, 'Av. Miraflores, nº4', 21000);
INSERT INTO GUIONISTA VALUES (56184923, 'Sebastian', 'Castellano Ruiz', 646888999, 'C. Luego, nº5', 18350);
INSERT INTO GUIONISTA VALUES (85163189, 'Teodora', 'Comas Peralta', 633222111, 'C. Nueva, nº6', 16400);
INSERT INTO GUIONISTA VALUES (51867315, 'Noelia', 'Sousa Roperto', 646333222, 'Av. Tiramilla, nº7', 25900);

INSERT INTO PELICULA VALUES (99999, 'In Time', 34562781, 22222, 56184923, '28-OCT-2011');
INSERT INTO PELICULA VALUES (88888, 'Divergente', 18654249, 33333, 85163189, '30-ABR-2014');

INSERT INTO ACTOR VALUES (65161894, 'Gonzalo', 'Miras Ludena', 646444333, 'Av. Trituron, nº8', 24000000);
INSERT INTO ACTOR VALUES (98413186, 'Maria', 'Perez Del Cielo', 646555444, 'C. Alpachino, nº9', 17000000);
INSERT INTO ACTOR VALUES (15668745, 'Roberto', 'Pedrin Busto', 633666555, 'C. Pino, nº10', 16000000);
INSERT INTO ACTOR VALUES (89471266, 'Lucia', 'Gonzalez Albal', 633777666, 'C. Benjamin, nº11', 28000000);

INSERT INTO ACTUAN VALUES (99999, 65161894, 65161894);
INSERT INTO ACTUAN VALUES (99999, 98413186, NULL);
INSERT INTO ACTUAN VALUES (88888, 15668745, NULL);
INSERT INTO ACTUAN VALUES (88888, 89471266, 89471266);